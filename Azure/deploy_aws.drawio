<?xml version='1.0' encoding='utf-8'?>
<mxGraphModel>
  <root>
    <mxCell id="0" />
    <mxCell id="1" parent="0" />
    <mxCell id="edge" value="Public Edge" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E3F2FD;strokeColor=#2196F3;" vertex="1" parent="1">
      <mxGeometry x="20" y="20" width="280" height="240" as="geometry" />
    </mxCell>
    <mxCell id="region" value="AWS Region / VPC" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#E8F5E9;strokeColor=#43A047;" vertex="1" parent="1">
      <mxGeometry x="340" y="20" width="780" height="560" as="geometry" />
    </mxCell>
    <mxCell id="ingress" value="Ingress Subnets" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#FBC02D;" vertex="1" parent="region">
      <mxGeometry x="360" y="40" width="360" height="240" as="geometry" />
    </mxCell>
    <mxCell id="processing" value="Processing Subnets" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#FBC02D;" vertex="1" parent="region">
      <mxGeometry x="720" y="40" width="380" height="240" as="geometry" />
    </mxCell>
    <mxCell id="data" value="Data Subnets" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#FBC02D;" vertex="1" parent="region">
      <mxGeometry x="360" y="300" width="360" height="260" as="geometry" />
    </mxCell>
    <mxCell id="ml" value="ML Subnets" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#FBC02D;" vertex="1" parent="region">
      <mxGeometry x="720" y="300" width="380" height="160" as="geometry" />
    </mxCell>
    <mxCell id="ops" value="Ops/Observability" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#FFFDE7;strokeColor=#FBC02D;" vertex="1" parent="region">
      <mxGeometry x="720" y="470" width="380" height="90" as="geometry" />
    </mxCell>
    <mxCell id="cf" value="CloudFront" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="edge">
      <mxGeometry x="40" y="60" width="240" height="40" as="geometry" />
    </mxCell>
    <mxCell id="apigw" value="API Gateway" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="edge">
      <mxGeometry x="40" y="110" width="240" height="40" as="geometry" />
    </mxCell>
    <mxCell id="sns" value="SNS (Notifications)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="edge">
      <mxGeometry x="40" y="160" width="240" height="40" as="geometry" />
    </mxCell>
    <mxCell id="device" value="Device (IoT)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="1">
      <mxGeometry x="40" y="210" width="240" height="40" as="geometry" />
    </mxCell>
    <mxCell id="vpce" value="VPC Endpoint" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="ingress">
      <mxGeometry x="380" y="60" width="160" height="40" as="geometry" />
    </mxCell>
    <mxCell id="iotcore" value="AWS IoT Core" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="ingress">
      <mxGeometry x="560" y="60" width="140" height="40" as="geometry" />
    </mxCell>
    <mxCell id="kinesis" value="Amazon Kinesis / MSK" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="ingress">
      <mxGeometry x="380" y="120" width="320" height="40" as="geometry" />
    </mxCell>
    <mxCell id="lam" value="AWS Lambda (Prov. Concurrency)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="processing">
      <mxGeometry x="740" y="60" width="340" height="40" as="geometry" />
    </mxCell>
    <mxCell id="fargate" value="AWS Fargate (Feature Extraction)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="processing">
      <mxGeometry x="740" y="110" width="340" height="40" as="geometry" />
    </mxCell>
    <mxCell id="kda" value="Kinesis Data Analytics" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="processing">
      <mxGeometry x="740" y="160" width="340" height="40" as="geometry" />
    </mxCell>
    <mxCell id="eb" value="EventBridge / Step Functions (Alerts)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="processing">
      <mxGeometry x="740" y="210" width="340" height="40" as="geometry" />
    </mxCell>
    <mxCell id="s3" value="Amazon S3 (Standard/IA/Glacier)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="data">
      <mxGeometry x="380" y="320" width="320" height="40" as="geometry" />
    </mxCell>
    <mxCell id="ddb" value="DynamoDB (metadata/queries)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="data">
      <mxGeometry x="380" y="370" width="320" height="40" as="geometry" />
    </mxCell>
    <mxCell id="kms" value="KMS" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="data">
      <mxGeometry x="380" y="420" width="320" height="40" as="geometry" />
    </mxCell>
    <mxCell id="secrets" value="Secrets Manager" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="data">
      <mxGeometry x="380" y="470" width="320" height="40" as="geometry" />
    </mxCell>
    <mxCell id="sm" value="SageMaker (Model Registry/Training)" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="ml">
      <mxGeometry x="740" y="320" width="340" height="40" as="geometry" />
    </mxCell>
    <mxCell id="cw" value="CloudWatch" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="ops">
      <mxGeometry x="740" y="490" width="160" height="40" as="geometry" />
    </mxCell>
    <mxCell id="waf" value="WAF" style="rounded=1;whiteSpace=wrap;html=1;" vertex="1" parent="ops">
      <mxGeometry x="920" y="490" width="160" height="40" as="geometry" />
    </mxCell>
    <mxCell id="e1" value="mTLS MQTT/HTTP" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="device" target="vpce">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e2" value="privatelink" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="vpce" target="iotcore">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e3" value="rules/routes" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="iotcore" target="kinesis">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e4" value="events" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="kinesis" target="lam">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e5" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="lam" target="fargate">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e6" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="lam" target="kda">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e7" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="lam" target="s3">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e8" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="lam" target="ddb">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e9" value="" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="fargate" target="sm">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e10" value="detections" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="kda" target="eb">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e11" value="model events" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="sm" target="eb">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e12" value="alerts" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="eb" target="sns">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e13" value="queries" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="ddb" target="apigw">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e14" value="public ingress" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="apigw" target="cf">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e15" value="secrets" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="lam" target="secrets">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
    <mxCell id="e16" value="metrics" style="edgeStyle=orthogonalEdgeStyle;rounded=1;html=1;endArrow=block;endFill=1;" edge="1" parent="1" source="s3" target="cw">
      <mxGeometry relative="1" as="geometry" />
    </mxCell>
  </root>
</mxGraphModel>